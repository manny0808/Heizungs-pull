# Mushroom Cards - Modern UI
# Requires: Mushroom Cards (HACS)

views:
  - title: Heizung Modern
    icon: mdi:radiator
    path: heizung-modern
    cards:
      # Title Card
      - type: custom:mushroom-title-card
        title: ðŸ”¥ Heizungs System
        subtitle: Ãœberwachung & Steuerung

      # Status Chips
      - type: horizontal-stack
        cards:
          - type: custom:mushroom-chips-card
            chips:
              - type: entity
                entity: sensor.heizung_parterre
                icon: mdi:radiator
                content: Parterre
                icon_color: |
                  [[[
                    if (entity.state === 'on') return 'orange';
                    return 'gray';
                  ]]]
              - type: entity
                entity: sensor.heizung_keller
                icon: mdi:home-floor-basement
                content: Keller
                icon_color: |
                  [[[
                    if (entity.state === 'on') return 'orange';
                    return 'gray';
                  ]]]
              - type: entity
                entity: sensor.heizung_dachwohnung
                icon: mdi:home-roof
                content: Dachwohnung
                icon_color: |
                  [[[
                    if (entity.state === 'on') return 'orange';
                    return 'gray';
                  ]]]
              - type: entity
                entity: sensor.pumpe_holzkessel
                icon: mdi:pump
                content: Holzkessel
                icon_color: |
                  [[[
                    if (entity.state === 'on') return 'orange';
                    return 'gray';
                  ]]]

      # Temperature Cards
      - type: grid
        cards:
          - type: custom:mushroom-template-card
            primary: Holzkessel
            secondary: "{{ states('sensor.temperature_holzkessel') }}Â°C"
            icon: mdi:fire
            icon_color: |
              [[[
                const temp = parseFloat(entity.state);
                if (temp > 80) return 'red';
                if (temp > 60) return 'orange';
                return 'green';
              ]]]
            entity: sensor.temperature_holzkessel
            layout: vertical
            fill_container: true
          - type: custom:mushroom-template-card
            primary: Vorlauf
            secondary: "{{ states('sensor.temperature_vorlauf') }}Â°C"
            icon: mdi:arrow-up-bold
            icon_color: blue
            entity: sensor.temperature_vorlauf
            layout: vertical
            fill_container: true
          - type: custom:mushroom-template-card
            primary: Boiler Mitte
            secondary: "{{ states('sensor.temperature_boiler_mitte') }}Â°C"
            icon: mdi:water-boiler
            icon_color: orange
            entity: sensor.temperature_boiler_mitte
            layout: vertical
            fill_container: true
          - type: custom:mushroom-template-card
            primary: AuÃŸen
            secondary: "{{ states('sensor.temperature_ausen') }}Â°C"
            icon: mdi:thermometer
            icon_color: |
              [[[
                const temp = parseFloat(entity.state);
                if (temp < 5) return 'blue';
                if (temp > 25) return 'red';
                return 'gray';
              ]]]
            entity: sensor.temperature_ausen
            layout: vertical
            fill_container: true

      # Temperature Graph
      - type: custom:apexcharts-card
        header:
          title: Temperaturen Verlauf
          show: true
        graph_span: 24h
        span:
          start: day
        all_series_config:
          stroke_width: 3
          opacity: 0.8
        series:
          - entity: sensor.temperature_holzkessel
            name: Holzkessel
            color: '#ff6b00'
            type: line
            curve: smooth
            group_by:
              func: avg
              duration: 5min
          - entity: sensor.temperature_vorlauf
            name: Vorlauf
            color: '#2196f3'
            type: line
            curve: smooth
            group_by:
              func: avg
              duration: 5min
          - entity: sensor.temperature_boiler_mitte
            name: Boiler Mitte
            color: '#ff9800'
            type: line
            curve: smooth
            group_by:
              func: avg
              duration: 5min

      # All Sensors Table
      - type: custom:mushroom-entity-card
        entity: sensor.heizung_parterre
        name: Heizung Parterre
        icon: mdi:radiator
        layout: horizontal
        fill_container: true
        secondary_info: last-changed
      - type: custom:mushroom-entity-card
        entity: sensor.heizung_keller
        name: Heizung Keller
        icon: mdi:home-floor-basement
        layout: horizontal
        fill_container: true
        secondary_info: last-changed
      - type: custom:mushroom-entity-card
        entity: sensor.heizung_dachwohnung
        name: Heizung Dachwohnung
        icon: mdi:home-roof
        layout: horizontal
        fill_container: true
        secondary_info: last-changed
      - type: custom:mushroom-entity-card
        entity: sensor.pumpe_heizung
        name: Pumpe Heizung
        icon: mdi:pump
        layout: horizontal
        fill_container: true
        secondary_info: last-changed
      - type: custom:mushroom-entity-card
        entity: sensor.pumpe_holzkessel
        name: Pumpe Holzkessel
        icon: mdi:pump
        layout: horizontal
        fill_container: true
        secondary_info: last-changed

      # Footer
      - type: custom:mushroom-template-card
        primary: Letztes Update
        secondary: "{{ states('sensor.heizungs_pull_last_update') }}"
        icon: mdi:clock-outline
        icon_color: gray
        entity: sensor.heizungs_pull_last_update
        layout: horizontal
        fill_container: true