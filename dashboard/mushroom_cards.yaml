# Mushroom Cards - Modern UI
# Requires: Mushroom Cards (HACS)

views:
  - title: Heizung Modern
    icon: mdi:radiator
    path: heizung-modern
    cards:
      # Title Card
      - type: custom:mushroom-title-card
        title: ðŸ”¥ Heizungs System
        subtitle: Ãœberwachung & Steuerung

      # Status Chips
      - type: horizontal-stack
        cards:
          - type: custom:mushroom-chips-card
            chips:
              - type: entity
                entity: binary_sensor.heizung_parterre
                icon: mdi:radiator
                content: Parterre
                icon_color: |
                  [[[
                    if (entity.state === 'on') return 'orange';
                    return 'gray';
                  ]]]
              - type: entity
                entity: binary_sensor.heizung_keller
                icon: mdi:home-floor-basement
                content: Keller
                icon_color: |
                  [[[
                    if (entity.state === 'on') return 'orange';
                    return 'gray';
                  ]]]
              - type: entity
                entity: binary_sensor.heizung_dachwohnung
                icon: mdi:home-roof
                content: Dachwohnung
                icon_color: |
                  [[[
                    if (entity.state === 'on') return 'orange';
                    return 'gray';
                  ]]]
              - type: entity
                entity: binary_sensor.pumpe_holzkessel
                icon: mdi:pump
                content: Holzkessel
                icon_color: |
                  [[[
                    if (entity.state === 'on') return 'green';
                    return 'gray';
                  ]]]

      # Temperature Cards
      - type: grid
        cards:
          - type: custom:mushroom-template-card
            primary: Kessel
            secondary: "{{ states('sensor.temp_kessel') }}Â°C"
            icon: mdi:fire
            icon_color: |
              [[[
                const temp = parseFloat(entity.state);
                if (temp > 80) return 'red';
                if (temp > 60) return 'orange';
                return 'green';
              ]]]
            entity: sensor.temp_kessel
            layout: vertical
            fill_container: true
          - type: custom:mushroom-template-card
            primary: Vorlauf
            secondary: "{{ states('sensor.temp_vorlauf') }}Â°C"
            icon: mdi:arrow-up-bold
            icon_color: blue
            entity: sensor.temp_vorlauf
            layout: vertical
            fill_container: true
          - type: custom:mushroom-template-card
            primary: RÃ¼cklauf
            secondary: "{{ states('sensor.temp_ruecklauf') }}Â°C"
            icon: mdi:arrow-down-bold
            icon_color: green
            entity: sensor.temp_ruecklauf
            layout: vertical
            fill_container: true
          - type: custom:mushroom-template-card
            primary: AuÃŸen
            secondary: "{{ states('sensor.temp_aussen') }}Â°C"
            icon: mdi:thermometer
            icon_color: |
              [[[
                const temp = parseFloat(entity.state);
                if (temp < 5) return 'blue';
                if (temp > 25) return 'red';
                return 'gray';
              ]]]
            entity: sensor.temp_aussen
            layout: vertical
            fill_container: true

      # Temperature Graph
      - type: custom:apexcharts-card
        header:
          title: Temperaturen Verlauf
          show: true
        graph_span: 24h
        span:
          start: day
        all_series_config:
          stroke_width: 3
          opacity: 0.8
        series:
          - entity: sensor.temp_kessel
            name: Kessel
            color: '#ff6b00'
            type: line
            curve: smooth
            group_by:
              func: avg
              duration: 5min
          - entity: sensor.temp_vorlauf
            name: Vorlauf
            color: '#2196f3'
            type: line
            curve: smooth
            group_by:
              func: avg
              duration: 5min
          - entity: sensor.temp_ruecklauf
            name: RÃ¼cklauf
            color: '#4caf50'
            type: line
            curve: smooth
            group_by:
              func: avg
              duration: 5min

      # Control Buttons
      - type: custom:mushroom-title-card
        title: Steuerung
        subtitle: Manuelle Eingriffe
      - type: grid
        columns: 2
        cards:
          - type: custom:mushroom-entity-card
            entity: binary_sensor.heizung_parterre
            name: Parterre
            icon: mdi:radiator
            layout: vertical
            fill_container: true
            tap_action:
              action: toggle
            hold_action:
              action: more-info
          - type: custom:mushroom-entity-card
            entity: binary_sensor.heizung_keller
            name: Keller
            icon: mdi:home-floor-basement
            layout: vertical
            fill_container: true
            tap_action:
              action: toggle
            hold_action:
              action: more-info
          - type: custom:mushroom-entity-card
            entity: binary_sensor.heizung_dachwohnung
            name: Dachwohnung
            icon: mdi:home-roof
            layout: vertical
            fill_container: true
            tap_action:
              action: toggle
            hold_action:
              action: more-info
          - type: custom:mushroom-entity-card
            entity: binary_sensor.pumpe_holzkessel
            name: Holzkessel
            icon: mdi:pump
            layout: vertical
            fill_container: true
            tap_action:
              action: toggle
            hold_action:
              action: more-info

      # Info Card
      - type: custom:mushroom-entity-card
        entity: sensor.heizungs_pull_last_update
        name: Letztes Update
        icon: mdi:update
        layout: horizontal
        fill_container: true
        secondary_info: last-updated